
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Floating Point Arithmetic &#8212; MATH0058 - Lecture Notes</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Principles of backward error analysis" href="error_analysis.html" />
    <link rel="prev" title="Matrix and vector norms" href="matrix_vector_norms.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">MATH0058 - Lecture Notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to MATH0058
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Fundamentals
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="matrix_vector_norms.html">
   Matrix and vector norms
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Floating Point Arithmetic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="error_analysis.html">
   Principles of backward error analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linear_system_error.html">
   Backward error and condition number of linear systems of equations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="complexity_notation.html">
   A quick survey of the
   <span class="math notranslate nohighlight">
    \(\mathcal{O}\)
   </span>
   -notation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="numpy_and_data_layouts.html">
   Memory layout and Numpy arrays
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  LU Decomposition and its numerical stability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lu_decomposition.html">
   Solving linear system with the LU Decomposition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lu_backward_error.html">
   Backward error of the LU decomposition and pivoting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lu_backward_error_examples.html">
   Backward error of the LU decomposition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="python_lu_decomposition.html">
   Implementing the LU decomposition in Python
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Orthogonal decompositions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="qr_decomposition.html">
   The QR Decomposition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="singular_value_decomposition.html">
   The Singular Value decomposition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="least_squares_problems.html">
   Least Squares Problems
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Eigenvalue problems
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="complex_vector_spaces.html">
   Complex vector spaces
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="eigenvalues_basic_properties.html">
   Basic properties of eigenvalue problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="schur_decomposition.html">
   The Schur decomposition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="eigenvalues_perturbation_theory.html">
   Perturbation results for eigenvalue problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="computing_eigenvalues.html">
   Computing eigenvalues
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Interpolation and quadrature
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="interpolation_and_quadrature.html">
   Introduction to interpolation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="quadrature.html">
   Numerical quadrature
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stable_quadrature_schemes.html">
   Stable quadrature schemes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Self Check Questions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="week_1_self_check.html">
   Week 1 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_2_self_check.html">
   Week 2 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_3_self_check.html">
   Week 3 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_4_self_check.html">
   Week 4 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_5_self_check.html">
   Week 5 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_6_self_check.html">
   Week 6 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_7_self_check.html">
   Week 7 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_8_self_check.html">
   Week 8 Self check questions and solutions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="week_9_self_check.html">
   Week 9 Self check questions and solutions
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/floating_point_arithmetic.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/floating_point_arithmetic.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#floating-point-types-in-python">
   Floating point types in Python
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-what-are-the-values-for-single-precision-arithmetic">
     Task: What are the values for single precision arithmetic?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition-of-floating-point-numbers">
   Definition of floating point numbers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#approximating-numbers-in-floating-point-arithmetic">
   Approximating numbers in floating point arithmetic
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fundamental-axiom-of-floating-point-arithmetic">
     Fundamental Axiom of Floating Point Arithmetic
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-symbols-in-floating-point-arithmetic">
   Special symbols in floating point arithmetic
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Floating Point Arithmetic</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#floating-point-types-in-python">
   Floating point types in Python
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#task-what-are-the-values-for-single-precision-arithmetic">
     Task: What are the values for single precision arithmetic?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition-of-floating-point-numbers">
   Definition of floating point numbers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#approximating-numbers-in-floating-point-arithmetic">
   Approximating numbers in floating point arithmetic
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fundamental-axiom-of-floating-point-arithmetic">
     Fundamental Axiom of Floating Point Arithmetic
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-symbols-in-floating-point-arithmetic">
   Special symbols in floating point arithmetic
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="floating-point-arithmetic">
<h1>Floating Point Arithmetic<a class="headerlink" href="#floating-point-arithmetic" title="Permalink to this headline">#</a></h1>
<p>In the following we learn how computers represent floating point numbers. Consider for example the number
<span class="math notranslate nohighlight">\(1/3 = 0.33333...\)</span>. Computers only have a finite amount of memory. We could try to work directly with fractional
expressions such as <span class="math notranslate nohighlight">\(1/3\)</span> and keep track of nominators and denominators. But it turns out that the number of digits on
both nominator and denominator tends to grow enormously as a computation progresses, making this approach infeasible.</p>
<p>On the other hand, if we want to store the sequence of digits <span class="math notranslate nohighlight">\(0.33333...\)</span> we have to cut-off at some point as computers
only have a finite amount of memory. Hence, we are introducing a small error. This cut-off and the resulting error
are rigorously defined in the IEEE 754 standard, which describes how to represent floating point numbers on modern computers.
This allows us to prove rigorous theorems that take into account that computers only support finite precision arithmetic.</p>
<p>The two most commonly types for floating point numbers are IEEE double precision and IEEE single precision. The former gives
us around 15 digits of accuracy. The latter around 7 digits of accuracy. For almost all purposes this is more than enough. Take for example the gravitational constant <span class="math notranslate nohighlight">\(G\)</span>. It is known to around <span class="math notranslate nohighlight">\(4\)</span> digits of accuracy, only
a fraction of the number of digits we have available in modern computers.</p>
<p>For most numerical calculations double precision is preferred. The reason is that in some computations errors might accumulate, leading to loss of accuracy. In double precision we have much more headroom for this than in single precision.</p>
<p>However, not all applications need such precision. For example, many
machine learning applications use the half-precision type that is even less
accurate than single precision but can be evaluated extremely efficiently on
dedicated hardware (e.g. tensore cores on modern machine learning accelerators).</p>
<section id="floating-point-types-in-python">
<h2>Floating point types in Python<a class="headerlink" href="#floating-point-types-in-python" title="Permalink to this headline">#</a></h2>
<p>The Numpy module defines convenient ways to query properties of floating point numbers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># import the numpy extension module</span>
                   <span class="c1"># and call it np as short form</span>
</pre></div>
</div>
</div>
</div>
<p>The data type names in <code class="docutils literal notranslate"><span class="pre">Numpy</span></code> for floating point types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IEEE</span> <span class="pre">double</span> <span class="pre">precision</span></code>: np.float, np.double, np.float64</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IEEE</span> <span class="pre">single</span> <span class="pre">precision</span></code>: np.single, np.float32</p></li>
</ul>
<p>Let us query some properties of these numbers</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">double_precision_info</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The biggest and smallest (by absolute value) normalized floating point numbers are</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">double_precision_info</span><span class="o">.</span><span class="n">max</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.7976931348623157e+308
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">double_precision_info</span><span class="o">.</span><span class="n">tiny</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.2250738585072014e-308
</pre></div>
</div>
</div>
</div>
<p>Floating point numbers can not be arbitrarily close to each other. There is a smallest relative distance, which we define shortly. It is given as</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">double_precision_info</span><span class="o">.</span><span class="n">eps</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.220446049250313e-16
</pre></div>
</div>
</div>
</div>
<p>This leads to a limited precision of floating point numbers. The approximate relative precision is</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">double_precision_info</span><span class="o">.</span><span class="n">precision</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>15
</pre></div>
</div>
</div>
</div>
<section id="task-what-are-the-values-for-single-precision-arithmetic">
<h3>Task: What are the values for single precision arithmetic?<a class="headerlink" href="#task-what-are-the-values-for-single-precision-arithmetic" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">single_precision_info</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">finfo</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="nb">print</span><span class="p">([</span><span class="n">single_precision_info</span><span class="o">.</span><span class="n">max</span><span class="p">,</span>
       <span class="n">single_precision_info</span><span class="o">.</span><span class="n">tiny</span><span class="p">,</span>
       <span class="n">single_precision_info</span><span class="o">.</span><span class="n">eps</span><span class="p">,</span>
       <span class="n">single_precision_info</span><span class="o">.</span><span class="n">precision</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[3.4028235e+38, 1.1754944e-38, 1.1920929e-07, 6]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="definition-of-floating-point-numbers">
<h2>Definition of floating point numbers<a class="headerlink" href="#definition-of-floating-point-numbers" title="Permalink to this headline">#</a></h2>
<p>We use the following model for floating point numbers. For more details, see e.g.
the recommended lecture book by Trefethen and Bau.</p>
<p>The set of floating point numbers is defined as follows:</p>
<div class="math notranslate nohighlight">
\[
\mathcal{F} = \left\{(-1)^s\cdot b^e \cdot \frac{m}{b^{p-1}} :\right.
\left. s = 0,1; e_{min}\leq e \leq e_{max}; b^{p-1}\leq m\leq b^{p}-1\right\}.
\]</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IEEE</span> <span class="pre">double</span> <span class="pre">precision</span></code>: <span class="math notranslate nohighlight">\(e_{min} = -1022, e_{max} = 1023, p = 53\)</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IEEE</span> <span class="pre">single</span> <span class="pre">precision</span></code>: <span class="math notranslate nohighlight">\(e_{min} = -126, e_{max} = 127, p = 24\)</span></p></li>
</ul>
<p>Typically, b = 2. For the mantissa we have:</p>
<div class="math notranslate nohighlight">
\[
\frac{m}{b^{p-1}} = 1, 1+b^{1-p}, 1+2b^{1-p}, \dots, b-b^{1-p}
\]</div>
<p><span class="math notranslate nohighlight">\(\rightarrow\)</span> Distance of neighbouring floats is <span class="math notranslate nohighlight">\(2^e b^{1-p}\)</span>.</p>
<p><span class="math notranslate nohighlight">\(\epsilon_{rel} = b^{1-p}\)</span> is smallest number such that
$<span class="math notranslate nohighlight">\(
1 + \epsilon_{rel} \neq 1.
\)</span>$</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="o">+</span> <span class="n">double_precision_info</span><span class="o">.</span><span class="n">eps</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0000000000000002
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.25</span> <span class="o">*</span> <span class="n">double_precision_info</span><span class="o">.</span><span class="n">eps</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="approximating-numbers-in-floating-point-arithmetic">
<h2>Approximating numbers in floating point arithmetic<a class="headerlink" href="#approximating-numbers-in-floating-point-arithmetic" title="Permalink to this headline">#</a></h2>
<p>Let <span class="math notranslate nohighlight">\(x\in\mathbb{R}\)</span>, <span class="math notranslate nohighlight">\(b^{e_{min}}\leq x &lt; b^{e_{max}+1}\)</span>. Define <span class="math notranslate nohighlight">\(\epsilon_{mach}:=\frac{1}{2}b^{1-p}\)</span></p>
<p>There exists <span class="math notranslate nohighlight">\(x'\in \mathcal{F}\)</span> such that <span class="math notranslate nohighlight">\(|x-x'|\leq\epsilon_{mach}|x|\)</span>.</p>
<p><strong><span class="math notranslate nohighlight">\(\epsilon_{mach}\)</span> is relative distance to the next floating point number in <span class="math notranslate nohighlight">\(\mathcal{F}\)</span>.</strong></p>
<p>Define the projection</p>
<div class="math notranslate nohighlight">
\[
fl:fl(x)\rightarrow x',
\]</div>
<p>where <span class="math notranslate nohighlight">\(x'\)</span> is the closest floating point number in <span class="math notranslate nohighlight">\(\mathcal{F}\)</span>.</p>
<p>It follows that <span class="math notranslate nohighlight">\(fl(x)=x*(1+\epsilon)\)</span> for some <span class="math notranslate nohighlight">\(|\epsilon|\leq \epsilon_{mach}\)</span>.</p>
<section id="fundamental-axiom-of-floating-point-arithmetic">
<h3>Fundamental Axiom of Floating Point Arithmetic<a class="headerlink" href="#fundamental-axiom-of-floating-point-arithmetic" title="Permalink to this headline">#</a></h3>
<p>Define <span class="math notranslate nohighlight">\(x\odot y = fl(x \cdot y)\)</span>, where <span class="math notranslate nohighlight">\(\cdot\)</span> is one of <span class="math notranslate nohighlight">\(+,-,\times,\div\)</span>. Then for all <span class="math notranslate nohighlight">\(x,y\in\mathcal{F}\)</span> there exists <span class="math notranslate nohighlight">\(\epsilon\)</span> with <span class="math notranslate nohighlight">\(|\epsilon| \leq \epsilon_{mach}\)</span> such that</p>
<div class="math notranslate nohighlight">
\[ 
x\odot y = (x \cdot y)(1+\epsilon).
\]</div>
<p>Most modern architectures guarantee this property.</p>
</section>
</section>
<section id="special-symbols-in-floating-point-arithmetic">
<h2>Special symbols in floating point arithmetic<a class="headerlink" href="#special-symbols-in-floating-point-arithmetic" title="Permalink to this headline">#</a></h2>
<p>In addition to numbers several other important symbols are defined in the floating point standard. The most important are:</p>
<ul class="simple">
<li><p>NaN: Not a number</p></li>
<li><p><span class="math notranslate nohighlight">\(\pm\)</span> inf</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>nan
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_7918/3058898986.py:3: RuntimeWarning: invalid value encountered in double_scalars
  b = np.float64(0) / np.float64(0)
</pre></div>
</div>
</div>
</div>
<p>Note that above we have explicitly converted the zeros in the division <span class="math notranslate nohighlight">\(0/0\)</span> to use the corresponding Numpy type. The reason is that Python itself is not fully IEEE 754 compliant. According to the standard the division <span class="math notranslate nohighlight">\(0 / 0\)</span> is valid and has <em>nan</em> as result. But letâ€™s consider what Python is doing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">0.</span> <span class="o">/</span> <span class="mf">0.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ZeroDivisionError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ipykernel_7918</span><span class="o">/</span><span class="mf">617932585.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0.</span> <span class="o">/</span> <span class="mf">0.</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="ne">ZeroDivisionError</span>: float division by zero
</pre></div>
</div>
</div>
</div>
<p>Instead of the result <em>nan</em> Python returns a runtime error. This may be useful for certain applications but not for numerics and is not IEEE 754 compliant. This is one of many reasons why for numerical computations the <code class="docutils literal notranslate"><span class="pre">Numpy</span></code> module is so important for Python.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="matrix_vector_norms.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Matrix and vector norms</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="error_analysis.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Principles of backward error analysis</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Timo Betcke<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>